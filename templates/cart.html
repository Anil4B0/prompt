<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Store</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="logo.png" alt="E-commerce Logo">
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Search...">
            <button type="button" onclick="search()">Search</button>
        </div>
        <div class="cart-button">
            <a href="/cart">Cart</a>
        </div>
    </header>

    <main>
        <h1>Products</h1>
        <div class="product-grid">
            <!-- Loop through products -->
            {% for category, products in products.items() %}
            <h2>{{ category.capitalize() }}</h2>
            <div class="product-category">
                {% for product in products %}
                <div class="product">
                    <h3>{{ product.name }}</h3>
                    <p>Price: ${{ product.price }}</p>
                    <button onclick="addToCart('{{ loop.index0 }}', '{{ category }}')">Add to Cart</button>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </main>

    <script>
function addToCart(index, category) {
    fetch('/add_to_cart', {
        method: 'POST',
        body: new URLSearchParams({
            'item': index,
            'category': category
        }),
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        }
    })
    .then(response => {
        if (response.ok) {
            alert('Item added to cart successfully!');
        } else {
            throw new Error('Failed to add item to cart');
        }
    })
    .catch(error => {
        alert('An error occurred while adding the item to the cart. Please try again later.');
        console.error('Error:', error);
    });
}


        function search() {
            // Add your search functionality here
            alert('Search functionality is not implemented yet.');
        }
    </script>
</body>
</html>
